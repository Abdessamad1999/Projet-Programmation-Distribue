<main id="main" class="main">
    <div class="pagetitle row">
        <div class="col-md-6">
            <h1>Liste des filieres</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a routerLink="/etablissements">Etablissements</a></li>
                    <li class="breadcrumb-item active">Filieres</li>
                </ol>
            </nav>
        </div>
        <div class="col-md-6 text-end">
            <button (click)="addFiliere()" class="btn-dark btn-sm p-1 fw-bold" data-bs-toggle="modal"
                data-bs-target="#filiereModal">
                <i class="fa fa-plus me-1"></i>
                Ajouter Filiere
            </button>
        </div>
    </div>
    <section class="section">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body">
                        <table class="table datatable">
                            <thead>
                                <tr>
                                    <th scope="col">Nom filiere</th>
                                    <th scope="col">Nombre anneés</th>
                                    <th scope="col">Nombre semestres</th>
                                    <th scope="col">Responsable filiere</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let filiere of filieres">
                                    <th scope="row" class="p-2">{{filiere.nomFilier}}</th>
                                    <td class="p-2">{{filiere.nombreAnnees}}</td>
                                    <td class="p-2">{{filiere.nombreSemestres}}</td>
                                    <td class="p-2">{{filiere.responsableFiliere}}</td>
                                    <td class="p-2">
                                        <button (click)="editFiliere(filiere)" data-bs-toggle="modal"
                                            data-bs-target="#filiereModal"
                                            class="border-0 text-primary bg-transparent">
                                            <i class="bi bi-pencil-square"></i></button>
                                        <button (click)="confirme(filiere.id)" data-bs-toggle="modal"
                                            data-bs-target="#confirmationModal"
                                            class="border-0 text-danger bg-transparent">
                                            <i class="bi bi-pencil-square"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="modal fade" id="filiereModal" tabindex="-1" aria-labelledby="filiereModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="filiereModalLabel">
                      <span *ngIf="!editForm">Nouveau Filiere</span>
                      <span *ngIf="editForm">Modifier Filiere</span>
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="nom" class="col-form-label">Nom filiere </label>
                        <input [(ngModel)]="filiere.nomFilier" type="text" class="form-control" id="nom" required>
                    </div>
                    <div class="mb-3">
                        <label for="nombreAnnees" class="col-form-label">Nombre anneés</label>
                        <input [(ngModel)]="filiere.nombreAnnees" type="text" class="form-control" id="nombreAnnees" required>
                    </div>
                    <div class="mb-3">
                        <label for="nombreSemestres" class="col-form-label">Nombre semestres </label>
                        <input [(ngModel)]="filiere.nombreSemestres" type="text" class="form-control" id="nombreSemestres" required>
                    </div>
                    <div class="mb-3">
                        <label for="responsableFiliere" class="col-form-label">Responsable filiere </label>
                        <input [(ngModel)]="filiere.responsableFiliere" type="text" class="form-control" id="responsableFiliere" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="hideModal" type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">Close</button>
                    <button *ngIf="!editForm" (click)="persistFiliere()" type="button" class="btn btn-primary"
                        data-bs-dismiss="modal">Ajouter</button>
                    <button *ngIf="editForm" (click)="updateFiliere()" type="button" class="btn btn-warning"
                        data-bs-dismiss="modal">Modifier</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="confirmationModal" aria-hidden="true" aria-labelledby="confirmationModalLabel"
        tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalToggleLabel">Confirmation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Confirmer la suppression
                </div>
                <div class="modal-footer">
                    <button (click)="deleteFiliere()" class="btn btn-danger" data-bs-dismiss="modal">Confirme</button>
                </div>
            </div>
        </div>
    </div>
</main>
